---
title:  "어서 와, 인프라는 처음이지?"
excerpt: "인프라 공방 1주차 첫 번째 미션 후기"

categories:
  - "Infra Workshop"
tags:
  - Blog
  - 인프라 공방
last_modified_at: 2021-06-12T21:00:00
--- 
<br>
현재 백엔드 개발자로 일하고 있으면서 이런 말 하긴 좀 창피하긴 한데...    
솔직히 애플리케이션 밖에서 무슨 일이 일어나는지에 대해서는 잘 모릅니다. 🤨  
그래서 이런 고민들을 자주 해봤는데요.  

- 왜 리눅스 명령어들은 하나같이 외계어 같은지... 
- 애플리케이션 성능이 안 나올 때 어디를 봐야 하는지...  
- 잘나가는 IT 회사들은 어떻게 서비스를 운영하는지...  

이런 고민들을 해결하기 위해서 눈여겨보던 교육 과정이 있었습니다.  
바로 넥스트스텝에서 운영하는 '[인프라 공방](https://edu.nextstep.camp/c/VI4PhjPA)' 인데요.  
이번에 강의 개설 알림이 오자마자 바로 결제해서 모집 정원에 들어갈 수 있었습니다.  
'자바지기' 박재성 대표님의 말씀으로는 **'9분'**만에 마감되었다고 하네요. 😱  
  
이번 포스트에서는 1주차 1단계 미션을 진행하면서 얻은 경험들을 적어보려고 합니다.  
<small>원래 주 단위로 정리해보려고 했는데, 아무래도 내용이 길어지면 글의 퀄리티가 떨어질 것 같아서...~~는 개뿔~~🤦‍♂️</small>

<b>
다만 아무래도 인프라에 대한 지식이 터무니없이 부족하다보니,  
여기서는 실제로 미션을 진행하며 얻은 인사이트나 팁 등을 위주로 서술하며    
네트워크 개념이나 원리 등에 대한 전문적인 내용은 깊게 다루지 않음을 말씀 드립니다.  
</b>

<b>
이번 교육 과정에서 인프라에 대한 모든 걸 마스터한다기보다는  
인프라가 무엇인지, 현업에서 실제로 어떻게 운영되는지를 대략적으로 경험해보고  
앞으로 인프라에 대해 스스로 학습할 수 있는 기반을 만드는 과정으로 보시면 될 것 같습니다.    
</b>

**'인프라'**라는 단어를 들으면 가장 먼저 무슨 생각이 드시나요?  
저는 가장 먼저 '인프라'를 누구보다 사랑하시는 대표적인 인물이 생각나는데요.

<center>
  <img src="/assets/image/heo-kooyoun.jpg" width="70%" height="70%"/>
  <p>
    <br>
    <b>여윾씌 빽엔두 개발짜다...<br>
    지굼 보시믄 아시게찌마는, 헨재 우녕 중인 애프리케숀에스<br> 
    에라가 난 위치를 증화키 찌버내는 메카니즈믄 솽당히 조크든요?<br>
    즈응말 모니트링 자래요.<br>
    제가 그듭 말씀드리지마는, 즈른 복짜판 로지게스<br> 
    침차카게 에라 지저믈 차즐 수 잉는 개발짜가 그릏게 만치 안타...<br>
    그릏기 때무네 인뿌라가 중요흔 그에요.</b>
  </p>
</center>
<br>

~~아니 야구 말고~~ IT 인프라란, **애플리케이션을 운영하기 위해 필요한 하드웨어나 OS, 미들웨어, 네트워크 등 
IT 서비스의 기반이 되는 시스템 및 구조**를 말하는데요.  
아무래도 이렇게 말하면 너무 광범위한 설명이라 솔직히 구체적으로 확 와닿지는 않죠.  

인프라 공방의 1주차 미션은 **'그럴듯한 인프라'**를 실제로 만들어보는 과정이었고,  
그 중 1단계 미션은 바로 **'통신망을 분리'**해보는 것이었습니다.  
<br>

## 통신망 분리하기 
<br>
얼마 전 **[금융감독원에서 망 분리 규제를 위반한 핀테크 기업들에 과태료를 부과](http://it.chosun.com/site/data/html_dir/2021/05/20/2021052001955.html)**했다는 뉴스가 있었죠. 그만큼 망 분리는 최근에, 특히 핀테크 업계에서는 핫한 이슈인데요.  
이 망 분리를 AWS의 **[VPC(Virtual Private Cloud)](https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/what-is-amazon-vpc.html)**를 통해 실습해봤습니다.  
미션을 통해 구성한 통신망의 전체적인 구조는 다음과 같은데요.  

<center>
  <img src="/assets/image/aws_vpc.png" width="80%" height="80%"/>
  <p>
    <br>
    <b>이게 다 뭔 소리래요? 🤯</b>
  </p>
</center>
  
인프라에 대해서 잘 아시거나 기존에 AWS를 사용해보신 분들이라면  
이 용어들이 익숙하시거나 저보다 훨씬 더 잘 이해하고 계실거라 생각합니다.  
이번 미션을 통해서 얻은 통신망 구성 시 고려해야 할 주의사항과 팁은 다음과 같습니다.
<br><br>

# 1. 서브넷을 구성할 땐 가용 영역을 나누어서 구성해라.  
AWS에는 **리전(Region)**과 **가용 영역(Availability Zone, AZ)**이라는 개념이 있는데요.  
리전이란 AWS가 서비스를 제공하는 지리적 위치🌏를 말하며,  
가용 영역이란 하나의 리전 안에서 사용할 수 있는 데이터 센터의 그룹📱📱을 의미합니다.  
우리는 가까운 대한민국 서울 리전의 가용 영역을 사용하면 되는데요.   
서울 리전에는 [2020년 7월 17일을 기점으로 4번째 가용 영역까지 추가](https://aws.amazon.com/ko/blogs/korea/now-open-fourth-availability-zone-in-the-aws-asia-pacific-seoul-region/)되었습니다.

자 그럼 서울 리전에 VPC를 생성하면 끝이냐? 그럼 미션 제목이 **'망 분리하기'**가 아니죠.  
이제 VPC 안에서 '서브넷'이라는 걸 생성하여 통신망을 나눕니다.  
**서브넷(Subnet)**이란, 하나의 네트워크를 다시 작은 부분으로 나눈다는 건데요.  
여기서는 생성한 VPC 안에서 사용 가능한 전체 IP 개수를 작은 그룹으로 나누는 겁니다.    

그럼 왜 서브넷을 생성하는 걸까요?  
여러가지 장점이 있는데 **효율적인 IP 관리**, **보안 성능 향상** 등이 있습니다.  
예를 들면 회사 내 부서마다 다른 IP 대역을 할당함으로써 네트워크 구성도를 더 효율적으로 관리할 수 있고,
특정 서버에는 특정 부서만 접근 가능하도록 보안을 구성하기에도 용이하죠.  
이번 미션에서는 내부 네트워크를 통해서만 통신할 수 있는 내부망(private)과  
외부 인터넷을 통해서도 통신할 수 있는 외부망(public)으로 구성하기 위함입니다.   

<center>
  <img src="/assets/image/aws_seoul_region.png" width="80%" height="80%"/>
  <p>
    <br>
    <b>서브넷을 구성할 땐 가용 영역을 분리하세요 👨🏼‍🏫</b>
  </p>
</center>

그런데, 서브넷을 구성할 때 왜 가용 영역을 나눠야 할까요?  
바로 다음을 고려해야 하기 때문입니다. 

<center>
  <img src="/assets/image/security_rule.png" width="80%" height="80%"/>
  <p>
    <br>
    <b>개인정보의 안전성 확보조치 기준 제11조(물리적 안전조치)</b>
  </p>
</center>

여기서 **'보안대책을 마련하여야 한다'**라는 부분이 핵심입니다.  
예를 들면, 현재 서울 리전에 사용할 수 있는 가용 영역은 네 곳이나 있는데  
'아마존 같은 대기업에서 관리하는데 뭐 별 일이야 있겠어?😌'라며 대수롭지 않게     
가용 영역 중 ap-northeast-2a 한 곳에 서브넷 구성을 몰빵(?)했다고 가정해봅시다.  
그런데 정말 만약에 **천재지변**⚡️🌪🌊이나 **인재(人災)**🔥가 발생하여 
ap-northeast-2a 데이터 센터가 정전되거나 무너지게 된다면, 
우리가 운영 중인 서비스도 운명을 같이 하겠죠? 😱  

이런 혹시나 일어날지 모르는 일에 대비하기 위해 가용 영역을 나눠서 구성해야 합니다.    
그럼 또 이런 걱정을 하실 수 있겠죠.    
**'물리적으로 떨어져 있는 가용 영역 간에 통신할 때 속도가 다소 지연되지 않을까요?'**  

<center>
  <img src="/assets/image/amazon_az.png"/>
  <p>
    <br>
    <b>그건 AWS가 알아서 처리했으니 안심하라구! 🦝</b>
  </p>
</center>
<br>

이를 적용하여 실제 미션 수행 시 구성한 서브넷은 다음과 같습니다.  

<center>
  <img src="/assets/image/aws_subnet_example.png"/>
</center>
<br>

서브넷을 외부망(public-a, public-b)과 내부망(management, internal) 각각 2개씩 구성했는데,  
각 망마다 가용 영역을 2a와 2b로 나누어서 구성한 걸 보실 수 있습니다.  
하나의 가용 영역에 외부망과 내부망이 한 세트씩 존재한다고도 볼 수 있겠네요.  

실제 서비스 운영을 위해서가 아닌 단순히 하나의 미션을 진행하는 거지만  
이런 부분부터 신경 써서 망을 분리하는 것이 얼마나 중요한지를 배울 수 있었습니다.    
<br><br>

